// Translations for Vietnamese, English, and Lao
const translations = {
    vi: {
        // Header
        title: "🇱🇦 Laos OCR Pro",
        subtitle: "Kéo thả PDF hoặc ảnh (PNG, JPG) để nhận diện chữ tiếng Lào",
        
        // Tabs
        tabUpload: "📤 Upload",
        tabHistory: "📚 Lịch sử",
        
        // Drop Zone
        dropTitle: "Kéo thả nhiều file vào đây",
        supportedFormats: "PDF, PNG, JPG, JPEG, GIF, BMP, WEBP",
        orText: "hoặc",
        chooseFile: "Chọn file",
        
        // File Queue
        queueTitle: "📋 File đang chờ xử lý",
        processAll: "🚀 Xử lý tất cả",
        
        // Loading
        processing: "Đang xử lý",
        filesText: "file...",
        
        // Results
        resultsTitle: "✅ Kết quả OCR",
        processed: "Đã xử lý:",
        downloadAll: "📥 Tải xuống tất cả",
        page: "Trang",
        copyBtn: "📋 Copy",
        copied: "✅ Đã copy!",
        
        // History
        historyTitle: "📚 Lịch sử xử lý",
        refresh: "🔄 Làm mới",
        loading: "Đang tải...",
        emptyHistory: "Chưa có lịch sử xử lý",
        viewBtn: "👁️ Xem",
        deleteBtn: "🗑️ Xóa",
        deleteConfirm: "Bạn có chắc muốn xóa bản ghi này?",
        
        // File info
        pages: "trang",
        fileType: "Loại:",
        
        // Errors
        noFile: "Không có file",
        noFileSelected: "Chưa chọn file",
        unsupportedFormat: "Định dạng file không được hỗ trợ",
        error: "Lỗi",
        connectionError: "Lỗi kết nối",
        deleteError: "Lỗi xóa bản ghi",
        loadHistoryError: "Lỗi tải lịch sử"
    },
    
    en: {
        // Header
        title: "🇱🇦 Laos OCR Pro",
        subtitle: "Drag & drop PDF or images (PNG, JPG) to recognize Lao text",
        
        // Tabs
        tabUpload: "📤 Upload",
        tabHistory: "📚 History",
        
        // Drop Zone
        dropTitle: "Drag & drop multiple files here",
        supportedFormats: "PDF, PNG, JPG, JPEG, GIF, BMP, WEBP",
        orText: "or",
        chooseFile: "Choose files",
        
        // File Queue
        queueTitle: "📋 Files in queue",
        processAll: "🚀 Process all",
        
        // Loading
        processing: "Processing",
        filesText: "files...",
        
        // Results
        resultsTitle: "✅ OCR Results",
        processed: "Processed:",
        downloadAll: "📥 Download all",
        page: "Page",
        copyBtn: "📋 Copy",
        copied: "✅ Copied!",
        
        // History
        historyTitle: "📚 Processing History",
        refresh: "🔄 Refresh",
        loading: "Loading...",
        emptyHistory: "No processing history yet",
        viewBtn: "👁️ View",
        deleteBtn: "🗑️ Delete",
        deleteConfirm: "Are you sure you want to delete this record?",
        
        // File info
        pages: "pages",
        fileType: "Type:",
        
        // Errors
        noFile: "No file",
        noFileSelected: "No file selected",
        unsupportedFormat: "Unsupported file format",
        error: "Error",
        connectionError: "Connection error",
        deleteError: "Error deleting record",
        loadHistoryError: "Error loading history"
    },
    
    lo: {
        // Header
        title: "🇱🇦 Laos OCR Pro",
        subtitle: "ລາກແລະວາງ PDF ຫຼືຮູບພາບ (PNG, JPG) ເພື່ອຮັບຮູ້ຂໍ້ຄວາມລາວ",
        
        // Tabs
        tabUpload: "📤 ອັບໂຫຼດ",
        tabHistory: "📚 ປະຫວັດ",
        
        // Drop Zone
        dropTitle: "ລາກແລະວາງໄຟລ໌ຫຼາຍໄຟລ໌ມາທີ່ນີ້",
        supportedFormats: "PDF, PNG, JPG, JPEG, GIF, BMP, WEBP",
        orText: "ຫຼື",
        chooseFile: "ເລືອກໄຟລ໌",
        
        // File Queue
        queueTitle: "📋 ໄຟລ໌ທີ່ລໍຖ້າການປະມວນຜົນ",
        processAll: "🚀 ປະມວນຜົນທັງຫມົດ",
        
        // Loading
        processing: "ກຳລັງປະມວນຜົນ",
        filesText: "ໄຟລ໌...",
        
        // Results
        resultsTitle: "✅ ຜົນການ OCR",
        processed: "ປະມວນຜົນແລ້ວ:",
        downloadAll: "📥 ດາວໂຫຼດທັງຫມົດ",
        page: "ໜ້າ",
        copyBtn: "📋 ສຳເນົາ",
        copied: "✅ ສຳເນົາແລ້ວ!",
        
        // History
        historyTitle: "📚 ປະຫວັດການປະມວນຜົນ",
        refresh: "🔄 ໂຫຼດໃໝ່",
        loading: "ກຳລັງໂຫຼດ...",
        emptyHistory: "ຍັງບໍ່ມີປະຫວັດການປະມວນຜົນ",
        viewBtn: "👁️ ເບິ່ງ",
        deleteBtn: "🗑️ ລຶບ",
        deleteConfirm: "ທ່ານແນ່ໃຈບໍ່ວ່າຕ້ອງການລຶບບັນທຶກນີ້?",
        
        // File info
        pages: "ໜ້າ",
        fileType: "ປະເພດ:",
        
        // Errors
        noFile: "ບໍ່ມີໄຟລ໌",
        noFileSelected: "ຍັງບໍ່ໄດ້ເລືອກໄຟລ໌",
        unsupportedFormat: "ຮູບແບບໄຟລ໌ບໍ່ຮອງຮັບ",
        error: "ຂໍ້ຜິດພາດ",
        connectionError: "ຂໍ້ຜິດພາດການເຊື່ອມຕໍ່",
        deleteError: "ຂໍ້ຜິດພາດໃນການລຶບບັນທຶກ",
        loadHistoryError: "ຂໍ້ຜິດພາດໃນການໂຫຼດປະຫວັດ"
    }
};

// Get current language from localStorage or default to Vietnamese
let currentLanguage = localStorage.getItem('language') || 'vi';

// Function to change language
function changeLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('language', lang);
    updatePageLanguage();
    
    // Update active language button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`[data-lang="${lang}"]`).classList.add('active');
}

// Function to update all text on the page
function updatePageLanguage() {
    const t = translations[currentLanguage];
    
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (t[key]) {
            if (element.tagName === 'INPUT' || element.tagName === 'BUTTON') {
                if (element.hasAttribute('placeholder')) {
                    element.placeholder = t[key];
                } else {
                    element.textContent = t[key];
                }
            } else {
                element.textContent = t[key];
            }
        }
    });
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', () => {
    updatePageLanguage();
    
    // Set active language button
    document.querySelector(`[data-lang="${currentLanguage}"]`)?.classList.add('active');
});

// Function to get translation
function t(key) {
    return translations[currentLanguage][key] || key;
}