// Translations for Vietnamese, English, and Lao
const translations = {
    vi: {
        // Header
        title: "ðŸ‡±ðŸ‡¦ Laos OCR Pro",
        subtitle: "KÃ©o tháº£ PDF hoáº·c áº£nh (PNG, JPG) Ä‘á»ƒ nháº­n diá»‡n chá»¯ tiáº¿ng LÃ o",
        
        // Tabs
        tabUpload: "ðŸ“¤ Upload",
        tabHistory: "ðŸ“š Lá»‹ch sá»­",
        
        // Drop Zone
        dropTitle: "KÃ©o tháº£ nhiá»u file vÃ o Ä‘Ã¢y",
        supportedFormats: "PDF, PNG, JPG, JPEG, GIF, BMP, WEBP",
        orText: "hoáº·c",
        chooseFile: "Chá»n file",
        
        // File Queue
        queueTitle: "ðŸ“‹ File Ä‘ang chá» xá»­ lÃ½",
        processAll: "ðŸš€ Xá»­ lÃ½ táº¥t cáº£",
        
        // Loading
        processing: "Äang xá»­ lÃ½",
        filesText: "file...",
        
        // Results
        resultsTitle: "âœ… Káº¿t quáº£ OCR",
        processed: "ÄÃ£ xá»­ lÃ½:",
        downloadAll: "ðŸ“¥ Táº£i xuá»‘ng táº¥t cáº£",
        page: "Trang",
        copyBtn: "ðŸ“‹ Copy",
        copied: "âœ… ÄÃ£ copy!",
        
        // History
        historyTitle: "ðŸ“š Lá»‹ch sá»­ xá»­ lÃ½",
        refresh: "ðŸ”„ LÃ m má»›i",
        loading: "Äang táº£i...",
        emptyHistory: "ChÆ°a cÃ³ lá»‹ch sá»­ xá»­ lÃ½",
        viewBtn: "ðŸ‘ï¸ Xem",
        deleteBtn: "ðŸ—‘ï¸ XÃ³a",
        deleteConfirm: "Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a báº£n ghi nÃ y?",
        
        // File info
        pages: "trang",
        fileType: "Loáº¡i:",
        
        // Errors
        noFile: "KhÃ´ng cÃ³ file",
        noFileSelected: "ChÆ°a chá»n file",
        unsupportedFormat: "Äá»‹nh dáº¡ng file khÃ´ng Ä‘Æ°á»£c há»— trá»£",
        error: "Lá»—i",
        connectionError: "Lá»—i káº¿t ná»‘i",
        deleteError: "Lá»—i xÃ³a báº£n ghi",
        loadHistoryError: "Lá»—i táº£i lá»‹ch sá»­"
    },
    
    en: {
        // Header
        title: "ðŸ‡±ðŸ‡¦ Laos OCR Pro",
        subtitle: "Drag & drop PDF or images (PNG, JPG) to recognize Lao text",
        
        // Tabs
        tabUpload: "ðŸ“¤ Upload",
        tabHistory: "ðŸ“š History",
        
        // Drop Zone
        dropTitle: "Drag & drop multiple files here",
        supportedFormats: "PDF, PNG, JPG, JPEG, GIF, BMP, WEBP",
        orText: "or",
        chooseFile: "Choose files",
        
        // File Queue
        queueTitle: "ðŸ“‹ Files in queue",
        processAll: "ðŸš€ Process all",
        
        // Loading
        processing: "Processing",
        filesText: "files...",
        
        // Results
        resultsTitle: "âœ… OCR Results",
        processed: "Processed:",
        downloadAll: "ðŸ“¥ Download all",
        page: "Page",
        copyBtn: "ðŸ“‹ Copy",
        copied: "âœ… Copied!",
        
        // History
        historyTitle: "ðŸ“š Processing History",
        refresh: "ðŸ”„ Refresh",
        loading: "Loading...",
        emptyHistory: "No processing history yet",
        viewBtn: "ðŸ‘ï¸ View",
        deleteBtn: "ðŸ—‘ï¸ Delete",
        deleteConfirm: "Are you sure you want to delete this record?",
        
        // File info
        pages: "pages",
        fileType: "Type:",
        
        // Errors
        noFile: "No file",
        noFileSelected: "No file selected",
        unsupportedFormat: "Unsupported file format",
        error: "Error",
        connectionError: "Connection error",
        deleteError: "Error deleting record",
        loadHistoryError: "Error loading history"
    },
    
    lo: {
        // Header
        title: "ðŸ‡±ðŸ‡¦ Laos OCR Pro",
        subtitle: "àº¥àº²àºà»àº¥àº°àº§àº²àº‡ PDF àº«àº¼àº·àº®àº¹àºšàºžàº²àºš (PNG, JPG) à»€àºžàº·à»ˆàº­àº®àº±àºšàº®àº¹à»‰àº‚à»à»‰àº„àº§àº²àº¡àº¥àº²àº§",
        
        // Tabs
        tabUpload: "ðŸ“¤ àº­àº±àºšà»‚àº«àº¼àº”",
        tabHistory: "ðŸ“š àº›àº°àº«àº§àº±àº”",
        
        // Drop Zone
        dropTitle: "àº¥àº²àºà»àº¥àº°àº§àº²àº‡à»„àºŸàº¥à»Œàº«àº¼àº²àºà»„àºŸàº¥à»Œàº¡àº²àº—àºµà»ˆàº™àºµà»‰",
        supportedFormats: "PDF, PNG, JPG, JPEG, GIF, BMP, WEBP",
        orText: "àº«àº¼àº·",
        chooseFile: "à»€àº¥àº·àº­àºà»„àºŸàº¥à»Œ",
        
        // File Queue
        queueTitle: "ðŸ“‹ à»„àºŸàº¥à»Œàº—àºµà»ˆàº¥à»àº–à»‰àº²àºàº²àº™àº›àº°àº¡àº§àº™àºœàº»àº™",
        processAll: "ðŸš€ àº›àº°àº¡àº§àº™àºœàº»àº™àº—àº±àº‡àº«àº¡àº»àº”",
        
        // Loading
        processing: "àºàº³àº¥àº±àº‡àº›àº°àº¡àº§àº™àºœàº»àº™",
        filesText: "à»„àºŸàº¥à»Œ...",
        
        // Results
        resultsTitle: "âœ… àºœàº»àº™àºàº²àº™ OCR",
        processed: "àº›àº°àº¡àº§àº™àºœàº»àº™à»àº¥à»‰àº§:",
        downloadAll: "ðŸ“¥ àº”àº²àº§à»‚àº«àº¼àº”àº—àº±àº‡àº«àº¡àº»àº”",
        page: "à»œà»‰àº²",
        copyBtn: "ðŸ“‹ àºªàº³à»€àº™àº»àº²",
        copied: "âœ… àºªàº³à»€àº™àº»àº²à»àº¥à»‰àº§!",
        
        // History
        historyTitle: "ðŸ“š àº›àº°àº«àº§àº±àº”àºàº²àº™àº›àº°àº¡àº§àº™àºœàº»àº™",
        refresh: "ðŸ”„ à»‚àº«àº¼àº”à»ƒà»à»ˆ",
        loading: "àºàº³àº¥àº±àº‡à»‚àº«àº¼àº”...",
        emptyHistory: "àºàº±àº‡àºšà»à»ˆàº¡àºµàº›àº°àº«àº§àº±àº”àºàº²àº™àº›àº°àº¡àº§àº™àºœàº»àº™",
        viewBtn: "ðŸ‘ï¸ à»€àºšàº´à»ˆàº‡",
        deleteBtn: "ðŸ—‘ï¸ àº¥àº¶àºš",
        deleteConfirm: "àº—à»ˆàº²àº™à»àº™à»ˆà»ƒàºˆàºšà»à»ˆàº§à»ˆàº²àº•à»‰àº­àº‡àºàº²àº™àº¥àº¶àºšàºšàº±àº™àº—àº¶àºàº™àºµà»‰?",
        
        // File info
        pages: "à»œà»‰àº²",
        fileType: "àº›àº°à»€àºžàº”:",
        
        // Errors
        noFile: "àºšà»à»ˆàº¡àºµà»„àºŸàº¥à»Œ",
        noFileSelected: "àºàº±àº‡àºšà»à»ˆà»„àº”à»‰à»€àº¥àº·àº­àºà»„àºŸàº¥à»Œ",
        unsupportedFormat: "àº®àº¹àºšà»àºšàºšà»„àºŸàº¥à»Œàºšà»à»ˆàº®àº­àº‡àº®àº±àºš",
        error: "àº‚à»à»‰àºœàº´àº”àºžàº²àº”",
        connectionError: "àº‚à»à»‰àºœàº´àº”àºžàº²àº”àºàº²àº™à»€àºŠàº·à»ˆàº­àº¡àº•à»à»ˆ",
        deleteError: "àº‚à»à»‰àºœàº´àº”àºžàº²àº”à»ƒàº™àºàº²àº™àº¥àº¶àºšàºšàº±àº™àº—àº¶àº",
        loadHistoryError: "àº‚à»à»‰àºœàº´àº”àºžàº²àº”à»ƒàº™àºàº²àº™à»‚àº«àº¼àº”àº›àº°àº«àº§àº±àº”"
    }
};

// Get current language from localStorage or default to Vietnamese
let currentLanguage = localStorage.getItem('language') || 'vi';

// Function to change language
function changeLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('language', lang);
    updatePageLanguage();
    
    // Update active language button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`[data-lang="${lang}"]`).classList.add('active');
}

// Function to update all text on the page
function updatePageLanguage() {
    const t = translations[currentLanguage];
    
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (t[key]) {
            if (element.tagName === 'INPUT' || element.tagName === 'BUTTON') {
                if (element.hasAttribute('placeholder')) {
                    element.placeholder = t[key];
                } else {
                    element.textContent = t[key];
                }
            } else {
                element.textContent = t[key];
            }
        }
    });
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', () => {
    updatePageLanguage();
    
    // Set active language button
    document.querySelector(`[data-lang="${currentLanguage}"]`)?.classList.add('active');
});

// Function to get translation
function t(key) {
    return translations[currentLanguage][key] || key;
}